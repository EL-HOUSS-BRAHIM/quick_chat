/**
 * Focus Management Styles
 * Enhanced focus indicators and keyboard navigation
 */

// Custom focus styles
:focus {
  outline: 2px solid var(--focus-color, #005fcc);
  outline-offset: 2px;
}

// Remove default focus for mouse users, keep for keyboard users
.js-focus-visible :focus:not(.focus-visible) {
  outline: none;
}

.focus-visible {
  outline: 2px solid var(--focus-color, #005fcc);
  outline-offset: 2px;
}

// Enhanced focus for interactive elements
button:focus,
.btn:focus,
a:focus,
input:focus,
textarea:focus,
select:focus {
  outline: 2px solid var(--focus-color, #005fcc);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(0, 95, 204, 0.2);
}

// Focus within containers
.focus-within {
  outline: 2px solid var(--focus-color, #005fcc);
  outline-offset: 2px;
}

// Custom focus for specific components
.message:focus {
  background-color: var(--bg-highlight);
  border-left: 4px solid var(--focus-color);
  outline: none;
}

.chat-input:focus {
  border-color: var(--focus-color);
  box-shadow: 0 0 0 3px rgba(0, 95, 204, 0.2);
}

// Navigation focus management
.nav-item:focus {
  background-color: var(--nav-focus-bg);
  color: var(--nav-focus-color);
}

// Modal focus management
.modal {
  &:focus {
    outline: none;
  }
  
  .modal-content:focus {
    outline: 2px solid var(--focus-color);
    outline-offset: -2px;
  }
}

// Dropdown focus management
.dropdown-menu {
  .dropdown-item:focus {
    background-color: var(--dropdown-focus-bg);
    color: var(--dropdown-focus-color);
    outline: none;
  }
}

// Tab focus management
.tab-list {
  .tab:focus {
    outline: 2px solid var(--focus-color);
    outline-offset: -2px;
    z-index: 1;
  }
}

// Skip link enhanced focus
.skip-link:focus {
  outline: 2px solid white;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px var(--focus-color);
}

// Focus trap styles
.focus-trap-active {
  position: relative;
  
  &::before,
  &::after {
    content: '';
    position: fixed;
    top: 0;
    width: 1px;
    height: 1px;
    opacity: 0;
    pointer-events: none;
  }
  
  &::before {
    left: 0;
  }
  
  &::after {
    right: 0;
  }
}

// High contrast focus indicators
@media (prefers-contrast: high) {
  :focus {
    outline: 3px solid;
    outline-offset: 2px;
  }
  
  .focus-visible {
    outline: 3px solid;
    outline-offset: 2px;
  }
}

// Focus for touch devices
@media (hover: none) and (pointer: coarse) {
  :focus {
    outline-width: 3px;
    outline-color: var(--focus-color-touch, #ff6b00);
  }
}

// Dark mode focus adjustments
@media (prefers-color-scheme: dark) {
  :root {
    --focus-color: #66b3ff;
    --focus-color-touch: #ff9500;
  }
}

// Focus management for dynamic content
.dynamic-focus {
  &[tabindex="-1"]:focus {
    outline: 2px dashed var(--focus-color);
  }
}

// Keyboard navigation helpers
.keyboard-nav-active {
  .hoverable:hover {
    background-color: transparent;
  }
  
  .hoverable:focus {
    background-color: var(--focus-bg);
  }
}

// Focus order indicators (for development/debugging)
.focus-order {
  position: relative;
  
  &::after {
    content: attr(data-focus-order);
    position: absolute;
    top: -8px;
    right: -8px;
    background: red;
    color: white;
    font-size: 10px;
    padding: 2px 4px;
    border-radius: 2px;
    font-weight: bold;
    display: none;
  }
  
  .debug-focus &::after {
    display: block;
  }
}

// Custom focus for chat-specific elements
.user-avatar:focus {
  outline: 2px solid var(--focus-color);
  outline-offset: 2px;
  border-radius: 50%;
}

.emoji-picker:focus {
  outline: 2px solid var(--focus-color);
  outline-offset: 2px;
}

.reaction-button:focus {
  transform: scale(1.1);
  outline: 2px solid var(--focus-color);
  outline-offset: 2px;
}

// Focus for notification elements
.notification:focus {
  outline: 2px solid var(--focus-color);
  outline-offset: -2px;
  border-radius: 4px;
}

// WebRTC control focus styles
.webrtc-controls {
  .control-btn:focus {
    outline: 2px solid white;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px var(--focus-color);
  }
}
